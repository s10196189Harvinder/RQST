@model List<Area>;
@{
    Layout = "~/Views/Shared/AdminMenu.cshtml";
}
<style>
    #map {
        height: 500px;
    }

    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
</style>
<link href="~/css/tableDesign.css" rel="stylesheet" />
<link href="~/css/adminpage.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    let map;
    function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
            center: { lat: 1.3562033, lng: 103.8281415 },
            zoom: 11,
        })
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3QoucpamS6ylPkzBSJBXmbt5ZH7Np6Jk&callback=initMap">
</script>


<h2>Admin page</h2>
<div id="map">

</div>

@{
    List<items> Titemlist = new List<items>();
    foreach (Area area in Model)
    {
        if (area.reqlist.Count != 0)
        {

            foreach (items item in area.itemsList){
                    items itemF = Titemlist.Find(x => x.Name == item.Name);
                    if (itemF == null)
                    {
                        items nItem = new items(item.Name, item.Requested, item.Icon, item.Remaining, item.BgCol);
                        Titemlist.Add(nItem);
                    }
                    else
                    {
                        itemF.Requested += item.Requested;
                    }
                }
            foreach (UserRequests requests in area.reqlist)
            {
                string words = "Item summary\n";
                <script>
                $(document).ready(function(){
                    var gaddress = "Singapore " +@requests.PostalCode;
                    var lat1;
                    var lng1;
                    axios.get('https://maps.googleapis.com/maps/api/geocode/json', {
                        params: {
                            address: gaddress,
                            key: 'AIzaSyA3QoucpamS6ylPkzBSJBXmbt5ZH7Np6Jk'
                        }
                    })
                        .then(function (response) {
                            console.log(response);
                            lat1 = Number(response.data.results[0].geometry.location.lat);
                            lng1 = Number(response.data.results[0].geometry.location.lng);
                            console.log(lat1);
                            console.log(lng1);

                            @foreach (items item in requests.itemlist)
                            {
                                words += item.Name + " :" + item.Requested + "\n";
                            }
                            var contents = "@words";
                            var marker = new google.maps.Marker({ position: { lat: lat1, lng: lng1 }, map: map, content: contents });
                            var infoWindow = new google.maps.InfoWindow({
                                content: contents
                            });
                            marker.addListener('click', function () {
                                infoWindow.open(map, marker)
                            });
                        });
                    });
                </script>
            }
        }
    }
    <button class="open-button" onclick="openForm()">Show Deliverables</button>
    <script src="~/js/tempdeliverables.js"></script>
    <div class="form-popup" id="myForm">
        <div class="main">
            <div class="tableDesign">
                <form class="form-container">
                    <table id="viewInfo" class="table">
                        <thead>
                            <tr style="text-align: center">
                                <th>Item name</th>
                                <th>Total requested Amount</th>
                                <th>Total Remaining</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (items item in Titemlist)
                            {
                                <tr class='table-primary' style="text-align: center">
                                    <td>@item.Name</td>
                                    <td>@item.Requested</td>
                                    <td>@item.Remaining</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                </form>
            </div>
        </div>
    </div>
}

<script>
    function addMarker(coords) {
        var marker = new google.maps.Marker({
            position: coords.coords,
            map: map
        })
    }
</script>